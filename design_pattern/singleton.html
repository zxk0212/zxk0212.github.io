<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>单例模式 | ZCY&#39;s BLOG</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Just do it!">
    
    <link rel="preload" href="/assets/css/0.styles.1a4db85a.css" as="style"><link rel="preload" href="/assets/js/app.7966699e.js" as="script"><link rel="preload" href="/assets/js/2.a36266ce.js" as="script"><link rel="preload" href="/assets/js/18.88f98640.js" as="script"><link rel="prefetch" href="/assets/js/10.d7744464.js"><link rel="prefetch" href="/assets/js/11.073d9fb2.js"><link rel="prefetch" href="/assets/js/12.fd3337a1.js"><link rel="prefetch" href="/assets/js/13.f250a71d.js"><link rel="prefetch" href="/assets/js/14.233c4df8.js"><link rel="prefetch" href="/assets/js/15.189ee2c5.js"><link rel="prefetch" href="/assets/js/16.f4b33bcf.js"><link rel="prefetch" href="/assets/js/17.98a5474b.js"><link rel="prefetch" href="/assets/js/19.09bc7a58.js"><link rel="prefetch" href="/assets/js/20.5020bc01.js"><link rel="prefetch" href="/assets/js/21.3cf865db.js"><link rel="prefetch" href="/assets/js/22.10e298f8.js"><link rel="prefetch" href="/assets/js/23.4629b927.js"><link rel="prefetch" href="/assets/js/24.0e1d2962.js"><link rel="prefetch" href="/assets/js/25.3a7f5748.js"><link rel="prefetch" href="/assets/js/26.f0f3808f.js"><link rel="prefetch" href="/assets/js/27.efe9003b.js"><link rel="prefetch" href="/assets/js/28.1b54fe71.js"><link rel="prefetch" href="/assets/js/29.102b0e8c.js"><link rel="prefetch" href="/assets/js/3.0ca1a8e6.js"><link rel="prefetch" href="/assets/js/4.fd3ef56b.js"><link rel="prefetch" href="/assets/js/5.e326f80d.js"><link rel="prefetch" href="/assets/js/6.7129a48f.js"><link rel="prefetch" href="/assets/js/7.b03b58ac.js"><link rel="prefetch" href="/assets/js/8.cf5b412a.js"><link rel="prefetch" href="/assets/js/9.8677abc0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1a4db85a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ZCY's BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/design_pattern/" class="nav-link router-link-active">
  设计模式
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/design_pattern/" class="nav-link router-link-active">
  设计模式
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>认识设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式七大原则</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式概述</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>创建型设计模式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design_pattern/singleton.html" aria-current="page" class="active sidebar-link">单例模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design_pattern/singleton.html#单例模式" class="sidebar-link">单例模式</a></li></ul></li><li><a href="/design_pattern/simple.html" class="sidebar-link">简单工厂模式</a></li><li><a href="/design_pattern/factoryMethod.html" class="sidebar-link">工厂方法模式</a></li><li><a href="/design_pattern/abstractFactory.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/design_pattern/builder.html" class="sidebar-link">生成器模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>结构型设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>行为型设计模式</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h2> <h3 id="定义-采取一定的方法保证在整个软件系统中-某一个类只有一个对象实例-并且该类值提供一个取得该对象的实例方法。"><a href="#定义-采取一定的方法保证在整个软件系统中-某一个类只有一个对象实例-并且该类值提供一个取得该对象的实例方法。" class="header-anchor">#</a> 定义：采取一定的方法保证在整个软件系统中，某一个类只有一个对象实例，并且该类值提供一个取得该对象的实例方法。</h3> <h3 id="单例模式类图"><a href="#单例模式类图" class="header-anchor">#</a> 单例模式类图</h3> <h3 id=""><a href="#" class="header-anchor">#</a> <img src="data:image/gif;base64,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" alt=""></h3> <h3 id="单例模式的实现方式"><a href="#单例模式的实现方式" class="header-anchor">#</a> 单例模式的实现方式</h3> <h4 id="_1-饿汉式"><a href="#_1-饿汉式" class="header-anchor">#</a> 1. 饿汉式</h4> <ul><li><p>静态常量</p> <p>步骤：</p> <ol><li>构造器私有化</li> <li>类的内部创建对象</li> <li>向外暴露一个静态的公共方法</li> <li>代码实现</li></ol> <p><strong>优点</strong>：写法比较简单，在类装载的时候就完成了实例化。避免了线程同步问题。</p> <p><strong>缺点</strong>：在类装载的时候就完成了实例化，没有达到Lazy Loading的效果。如果从始至终没有使用过这个类，就会造成内存浪费。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span>hungryMan<span class="token punctuation">;</span>

<span class="token comment">// 饿汉式 静态变量</span>
<span class="token keyword">class</span> <span class="token class-name">Singleton01</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 构造器私有化</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton01</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// 2. 类的内部创建对象</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton01</span> singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 向外暴露一个静态的公共方法</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton01</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>静态代码块</p> <p><strong>优缺点与静态常量一样，仅仅是将创建对象放在了静态代码块中</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span>hungryMan<span class="token punctuation">;</span>

<span class="token comment">// 饿汉式静态代码块</span>
<span class="token keyword">class</span> <span class="token class-name">Singleton02</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 构造器私有化</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton02</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// 2. 类的内部创建对象</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton02</span> singleton<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span> <span class="token comment">// 在静态代码块中，创建单例对象</span>
        singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3. 向外暴露一个静态的公共方法</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton02</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <h4 id="_2-懒汉式"><a href="#_2-懒汉式" class="header-anchor">#</a> 2. 懒汉式</h4> <ul><li><p>线程不安全</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token class-name">LazyMan</span><span class="token punctuation">;</span>

<span class="token comment">// 懒汉式，线程不安全</span>
<span class="token keyword">class</span> <span class="token class-name">Singleton1</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton1</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Singleton1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton1</span> getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>说明</p> <ol><li><p>起到了Lazy Loading的效果，但是只能在单线程下使用</p></li> <li><p>如果多线程条件下，一个线程进入 if (instance == null)语句块，还未来的及往下执行，另一个线程也通过了判断条件，就会产生多个实例。</p></li></ol></li> <li><p>线程安全</p> <p>​	同步方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token class-name">LazyMan</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Singleton2</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton2</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Singleton2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton2</span> getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>​	说明</p> <ol><li>解决了线程不安全</li> <li>效率太低，每个线程想要获得类的实例的时候，执行getInstance()方法都要进行同步，实际上只需要在第一次创建的时候防止同时创建调用就可以了，其他时候也需要同步，降低了效率。</li></ol> <p>​	同步代码块</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Singleton3</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton3</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Singleton3</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton3</span> getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton3</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>​			这种同步并不能起到线程同步的作用，只要有多个线程通过if判断但是停在锁前，就会出现线程不安全的问题，就会产生多个实例。</p></li></ul> <h4 id="_3-双重检查"><a href="#_3-双重检查" class="header-anchor">#</a> 3. 双重检查</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
  	<span class="token comment">// 提供一个静态的公有方法，加入双重检查代码，解决线程安全问题，同时解决LazyLoading问题 </span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>​		关于volatile关键字可以查看 <a href="https://juejin.cn/post/6844903601064640525" target="_blank" rel="noopener noreferrer">彻底理解Volatitle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>说明</p> <ol><li>Double-Check进行了两次对对象是否为空的判断，这样保证了线程的安全</li> <li>并且实例化代码值用执行一次，后面再次访问在最外层判断就直接返回了，避免了反复进行方法同步</li> <li>线程安全，延迟加载，效率高</li></ol> <h4 id="_4-静态内部类"><a href="#_4-静态内部类" class="header-anchor">#</a> 4. 静态内部类</h4> <p>特点：</p> <ol><li>外部类被装载的时候静态内部类不会一同被装载</li> <li>调用静态内部类中创建的对象时，静态内部类才会被装载，并且线程安全</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonInstance</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonInstance</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>​	说明</p> <ol><li>这种方式采用了类装载的机制来保证初始化实例时只有一个线程</li> <li>类的静态属性只会在第一次家在类的时候初始化，所以保证了线程安全，在类的初始化时，别的线程无法进入</li> <li>避免了线程不安全，利用静态内部类特点实现了延时加载，效率高</li></ol> <h4 id="_5-枚举"><a href="#_5-枚举" class="header-anchor">#</a> 5. 枚举</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    INSTANCE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>说明</p> <ul><li>不仅能够避免多线程问题，还可以防止反序列化重新创建对象</li></ul> <h4 id="单例模式在jdk中的应用"><a href="#单例模式在jdk中的应用" class="header-anchor">#</a> 单例模式在JDK中的应用</h4> <p>jdk中的RunTime就是单例模式</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design_pattern/summery.html" class="prev">
        设计模式概述
      </a></span> <span class="next"><a href="/design_pattern/simple.html">
        简单工厂模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7966699e.js" defer></script><script src="/assets/js/2.a36266ce.js" defer></script><script src="/assets/js/18.88f98640.js" defer></script>
  </body>
</html>
